{% extends "modal/modal_template.html" %}
{% block title %}
Create Invite to {{ project_name }} (Project ID: {{ project_id }})
{% endblock title %}

{% block form %}
<form role="form" class="form-control" hx-post="{{ url_for('invite_new') }}" hx-target="#modalContent" id="role-form">
    <div class="form-floating mb-3">
        <input type="text" class="form-control" id="prompt" name="prompt" value="{{ form['prompt'] if form }}" >
        <label for="prompt">Prompt:</label>
    </div>
    <div class="form-floating mb-3">
        <input type="text" class="form-control" id="default_username" name="default_username" value="{{ form['default_username'] if form }}">
        <label for="default_username">Username:</label>
    </div>
    <div class="form-floating mb-3">
        <input type="email" class="form-control" id="default_email" name="default_email" value="{{ form['default_email'] if form }}">
        <label for="default_email">email:</label>
    </div>
    <div class="form-floating mb-3">
        <input type="text" class="form-control" id="default_display_name" name="default_display_name" value="{{ form['default_display_name'] if form }}">
        <label for="default_display_name">Display name:</label>
    </div>
    <div class="mb-3">
        <label class="mb-2">Auto add roles</label>
        {% for role in roles %}
        <div class="form-check">
            <label class="form-check-label" tooltip="{{ role.display_name|e }}" data-bs-toggle="tooltip" data-bs-html="true"
                   data-bs-title="<b>{{ role.description|e }}</b><hr><div class=text-start><b>api:</b> {{ role.permissions_api|e }}<br><b>git:</b> {{ role.permissions_git|e }}<br><b>storage:</b> {{ role.permissions_storage|e }}</div>">
                <input type="checkbox" class="form-check-input" name="role" value="{{ role.name|e }}" data-role-checkbox>
                {{ role.name }}
            </label>
        </div>
        {% endfor %}
    </div>
    <input type="hidden" name="project_id" value="{{ project_id }}">
</form>
<script>
(function(){
    const tooltipTriggerList = document.currentScript.previousElementSibling.querySelectorAll('[data-bs-toggle="tooltip"]');
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
})();
</script>
{% endblock form %}
{% block buttons %}
<button type="submit" class="btn btn-primary" form="role-form">Create Invite</button>
{% endblock buttons %}